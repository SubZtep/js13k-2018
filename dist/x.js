"use strict";var packageName=require("../upcoming-info").name,packageVersion=require("../upcoming-info").upcoming.version;module.exports.Component={version:function(){return packageVersion},name:function(){return packageName},dependencies:["position","rotation"],schema:{enabled:{default:!0},sides:{type:"int",default:6},radius:{type:"int",default:10},open:{default:""},wall:{default:""}},init:function(){this.borderData={};var t=this.data.wall;t="#"==t[0]?t.substring(1):t;var e=document.getElementById(t);e?(this.borderData.wallWidth=e.getAttribute("width"),this.borderData.wallDepth=e.getAttribute("depth"),this.borderData.wallHeight=e.getAttribute("height"),this.borderData.wallRotation=e.getAttribute("rotation")):(this.borderData.wallWidth=4,this.borderData.wallDepth=1,this.borderData.wallHeight=1,this.borderData.wallRotation={x:0,y:0,z:0}),this.borderData.openList=[],this.buildOpenList()},buildOpenList:function(){var t=this.data.open.split(" ");for(var e in t){var a=t[e],i=parseInt(a,10);isNaN(i)||i>=0&&(this.borderData.openList[i]=!0)}},drawBorderWall:function(t){var e=(t=t||{}).position||{x:0,y:0,z:0},a=t.rotation||{x:0,y:0,z:0},i=this.data.wall;i="#"==i[0]?i.substring(1):i;var r=null,o=document.getElementById(i);o?(r=o.cloneNode(!0),this.el.appendChild(r)):(r=document.createElement("a-box"),this.el.appendChild(r),r.setAttribute("color","tomato"),r.setAttribute("width",this.borderData.wallWidth),r.setAttribute("depth",this.borderData.wallDepth),r.setAttribute("height",this.borderData.wallHeight),r.setAttribute("static-body","")),r.setAttribute("rotation",a),r.setAttribute("position",e)},update:function(){if(this.data.enabled)for(var t=this.data.sides,e=this.data.radius,a=(this.borderData.wallWidth,this.borderData.wallDepth,this.borderData.wallHeight,this.borderData.wallRotation),i=2*Math.PI/t,r=360/t,o=0,n=0;o<t;o++,n+=i){var s=e*Math.cos(n),d=e*Math.sin(n);this.borderData.openList[o]||this.drawBorderWall({position:{x:s,y:0,z:d},rotation:{x:a.x,y:a.y+90-o*r,z:a.z}})}},remove:function(){}};